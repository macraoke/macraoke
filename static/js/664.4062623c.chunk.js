/*! For license information please see 664.4062623c.chunk.js.LICENSE.txt */
(self.webpackChunkmacraoke=self.webpackChunkmacraoke||[]).push([[664],{664:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return f}});var n=r(165),i=r(861),s=r(671),a=r(144),u=r(340),c=r(882),l=r(873),o=r.n(l),d=r(791),v=r(184),h=function(t){(0,u.Z)(r,t);var e=(0,c.Z)(r);function r(t){var n;return(0,s.Z)(this,r),(n=e.call(this,t))._interval=void 0,n._lyrics=void 0,n._lyricId=void 0,n._Mounted=void 0,n._lyricId=0,n._Mounted=!1,n.state={time:0,lyric:void 0},n}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){this._Mounted||(this._Mounted=!0,this._loadAndPlay())}},{key:"componentWillUnmount",value:function(){this._interval&&clearInterval(this._interval)}},{key:"render",value:function(){var t,e,r;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{children:["Time: ",null===(t=this.state)||void 0===t?void 0:t.time]}),(0,v.jsxs)("p",{children:["Text: ",null===(e=this.state)||void 0===e||null===(r=e.lyric)||void 0===r?void 0:r.text]})]})}},{key:"_loadAndPlay",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._loadLyrics();case 2:this._interval=setInterval(this._beat.bind(this),100);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_loadLyrics",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/subtitles/f-s_Vv82yFw.srt");case 2:return e=t.sent,t.t0=o(),t.next=6,e.text();case 6:t.t1=t.sent,this._lyrics=(0,t.t0)(t.t1);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_beat",value:function(){var t=this.state.time;this.setState({time:t+100,lyric:this._findNextLyric()})}},{key:"_findNextLyric",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._lyricId;if(this._lyrics&&!(t>=this._lyrics.length)){var e=this._lyrics[t],r=1e3*e.start,n=1e3*e.end,i=this.state.time;if(i<=n){if(i<r)return;return this._lyricId=t,e}return this._findNextLyric(t+1)}}}]),r}(d.Component),f=h},873:function(t){t.exports=function(){"use strict";function t(t){var e=t.split(":");try{var r=e[2].split(",");return 1===r.length&&(r=e[2].split(".")),3600*parseFloat(e[0],10)+60*parseFloat(e[1],10)+parseFloat(r[0],10)+parseFloat(r[1],10)/1e3}catch(n){return 0}}function e(t,e){for(var r=e;!t[r];)r++;return r}function r(t){for(var e=t.length-1;e>=0&&!t[e];)e--;return e}function n(){for(var n=[],i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/(?:\r\n|\r|\n)/gm),s=r(i)+1,a=0,u=void 0,c=void 0,l=void 0,o=0;o<s;o++){for(l={},c=[],o=e(i,o),l.id=parseInt(i[o++],10),u=i[o++].split(/[\t ]*-->[\t ]*/),l.start=t(u[0]),-1!==(a=u[1].indexOf(" "))&&(u[1]=u[1].substr(0,a)),l.end=t(u[1]);o<s&&i[o];)c.push(i[o++]);l.text=c.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),l.text=l.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),l.text=l.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),l.text=l.text.replace(/\\N/gi,"<br />"),n.push(l)}return n}return n}()}}]);
//# sourceMappingURL=664.4062623c.chunk.js.map